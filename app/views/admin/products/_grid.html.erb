<%= grid(@products, show_filters: :when_filtered, allow_showing_all_records: false,  class: 'table-img') do |g|

  g.column name: '<input type="checkbox" class="select_all_or_cancel"/>'.html_safe do |obj|
    "<input type='checkbox' name='ids[]' value='#{obj.id}'/>".html_safe
  end


  %w(id serial_number title is_top trend_courier_id created_at status).each do |attr|
    g.column :name => Product.human_attribute_name(attr.to_sym), :attribute => attr do |obj|
      if attr.in? %w(created_at updated_at)
        t2l(obj.send(attr.to_sym))
      elsif attr == 'status'
        status_icon(obj.status)
      elsif attr == 'is_top'
        str = '<a href="javascript:;" title="'+ (obj.is_top ? '取消推荐' : '推荐') + '">'
        str += (obj.is_top ? '是' : '否')
        str += '<a>'
        str.html_safe
      elsif attr == 'trend_courier_id'
        obj.trend_courier.title if obj.trend_courier
      else
        obj.send(attr.to_sym)
      end
    end
  end

  g.column do |obj|
    link = link_to('<i class="icon-picture" title="图片"></i>'.html_safe, admin_product_pictures_path(obj.id))
    link << link_to('<i class="icon-list-alt" title="同款"></i>'.html_safe, admin_product_same_sections_path(obj.id))
    link << link_to('<i class="icon-comment" title="评价"></i>'.html_safe, admin_product_comments_path(obj.id))
    link << actions_links(obj, 7)
    link.html_safe
  end

end -%>
